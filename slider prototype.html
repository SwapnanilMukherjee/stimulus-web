<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Scrolling Widget</title>
        <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@3.6.12/dist/js/splide.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide-extension-auto-scroll@0.3.7/dist/js/splide-extension-auto-scroll.min.js"></script>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            .splide {
                width: 100%;
                height: 200px;
                overflow: hidden;
            }

            .splide__list {
                display: flex;
                list-style-type: none;
            }

            .card-container::-webkit-scrollbar {
                display: none;
            }

            .card {
                display: block;
                min-width: 200px;
                height: 150px;
                margin: 10px;
                border-radius: 5%;
                background: #685656;
            }
        </style>
    </head>
    <body>
        <div class="splide">
            <div class="splide__track">
                <ul class="splide__list">
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                    <li class="splide__slide">
                        <div
                            class="card"
                            onmouseover="mouseOver(this)"
                            onmouseout="mouseOut(this)"
                        ></div>
                    </li>
                </ul>
            </div>
        </div>
        <script>
            const splide = new Splide(".splide", {
                type: "loop",
                drag: "free",
                perPage: 3,
                autoScroll: {
                    speed: 2,
                },
                arrows: false,
                pagination: false,
            });

            splide.mount(window.splide.Extensions);

            let cards = document.querySelectorAll(".card");
            let x = 0;
            let y = 0;
            let posOrNeg = 0;
            let maxRotation = 15;
            let rotationValue = 0;

            let mouseOver = (e) => {
                rotationValue = e.style.transform;
                e.style.transform = "rotateX(0) rotateY(0)";
                e.style.boxShadow = "10px 15px 20px rgb(0, 0, 0, 0.2)";
                e.style.transform = "scale(102%)";
            };

            let mouseOut = (e) => {
                e.style.transform = rotationValue;
                rotationValue = 0;
                e.style.boxShadow = "10px 15px 10px rgb(0, 0, 0, 0.2)";
            };

            for (let i = 0; i < cards.length; i++) {
                posOrNeg = Math.random() < 0.5 ? -1 : 1;
                x = Math.floor(Math.random() * maxRotation) * posOrNeg;
                posOrNeg = Math.random() < 0.5 ? -1 : 1;
                y = Math.floor(Math.random() * maxRotation) * posOrNeg;

                cards[
                    i
                ].style.transform = `rotateX(calc(${x} * 1deg)) rotateY(calc(${y} * 1deg))`;
                cards[i].style.boxShadow = "10px 15px 10px rgb(0, 0, 0, 0.2)";
            }
        </script>
    </body>
</html>
